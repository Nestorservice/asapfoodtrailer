{% extends "base.html" %}

{% block content %}

<!-- Page Header -->
<div class="inner-hero bg-cover"
    style="background: linear-gradient(135deg, rgba(10,10,10,0.85), rgba(10,10,10,0.6)), url('https://images.unsplash.com/photo-1565123409695-7b5ef63a2efb?w=1400&q=70'); background-size: cover; background-position: center; padding: 160px 0 80px;">
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <div class="heading1">
                    <span class="sub-title2" style="color:#ff6b00;">Get in Touch</span>
                    <h1 style="color:#fff; font-family:'Outfit',sans-serif; font-weight:900;">Contact Us</h1>
                    <nav aria-label="breadcrumb" class="mt-16">
                        <ol class="breadcrumb" style="background:transparent;padding:0;">
                            <li class="breadcrumb-item"><a href="/" style="color:rgba(255,255,255,.7);">Home</a></li>
                            <li class="breadcrumb-item active" style="color:#ff6b00;">Contact</li>
                        </ol>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="sp">
    <div class="container">
        <div class="row">
            <!-- Contact Cards -->
            <div class="col-lg-4">
                <div class="asap-contact-cards" data-aos="fade-right" data-aos-duration="800">
                    <div class="contact-card mb-4" style="background:#f8f9fa;border-radius:16px;padding:30px;">
                        <div class="d-flex align-items-start gap-3">
                            <div
                                style="width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,#ff6b00,#ff8c33);display:flex;align-items:center;justify-content:center;flex-shrink:0;">
                                <i class="bi bi-telephone" style="color:#fff;font-size:1.2rem;"></i>
                            </div>
                            <div>
                                <h6 style="font-weight:700;margin-bottom:4px;">Phone</h6>
                                <a href="tel:{{ business.phone }}" style="color:#555;">{{ business.phone }}</a>
                            </div>
                        </div>
                    </div>
                    <div class="contact-card mb-4" style="background:#f8f9fa;border-radius:16px;padding:30px;">
                        <div class="d-flex align-items-start gap-3">
                            <div
                                style="width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,#ff6b00,#ff8c33);display:flex;align-items:center;justify-content:center;flex-shrink:0;">
                                <i class="bi bi-envelope" style="color:#fff;font-size:1.2rem;"></i>
                            </div>
                            <div>
                                <h6 style="font-weight:700;margin-bottom:4px;">Email</h6>
                                <a href="mailto:{{ business.email }}" style="color:#555;">{{ business.email }}</a>
                            </div>
                        </div>
                    </div>
                    <div class="contact-card mb-4" style="background:#f8f9fa;border-radius:16px;padding:30px;">
                        <div class="d-flex align-items-start gap-3">
                            <div
                                style="width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,#ff6b00,#ff8c33);display:flex;align-items:center;justify-content:center;flex-shrink:0;">
                                <i class="bi bi-geo-alt" style="color:#fff;font-size:1.2rem;"></i>
                            </div>
                            <div>
                                <h6 style="font-weight:700;margin-bottom:4px;">Location</h6>
                                <p style="color:#555;margin:0;">{{ business.address }}</p>
                            </div>
                        </div>
                    </div>
                    <div class="contact-card mb-4" style="background:#f8f9fa;border-radius:16px;padding:30px;">
                        <div class="d-flex align-items-start gap-3">
                            <div
                                style="width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,#ff6b00,#ff8c33);display:flex;align-items:center;justify-content:center;flex-shrink:0;">
                                <i class="bi bi-clock" style="color:#fff;font-size:1.2rem;"></i>
                            </div>
                            <div>
                                <h6 style="font-weight:700;margin-bottom:4px;">Hours</h6>
                                <p style="color:#555;margin:0;">Mon - Sat: 8AM - 6PM<br>Sunday: Closed</p>
                            </div>
                        </div>
                    </div>
                    <div class="contact-card"
                        style="background:linear-gradient(135deg,#25d366,#128c40);border-radius:16px;padding:30px;">
                        <div class="d-flex align-items-start gap-3">
                            <div
                                style="width:48px;height:48px;border-radius:12px;background:rgba(255,255,255,0.2);display:flex;align-items:center;justify-content:center;flex-shrink:0;">
                                <i class="bi bi-whatsapp" style="color:#fff;font-size:1.4rem;"></i>
                            </div>
                            <div>
                                <h6 style="font-weight:700;margin-bottom:4px;color:#fff;">WhatsApp</h6>
                                <a href="https://wa.me/{{ business.whatsapp }}?text={{ 'Hi! I\'d like to inquire about your food trucks.' | urlencode }}"
                                    target="_blank" style="color:rgba(255,255,255,0.9);text-decoration:underline;">Chat
                                    with us now â†’</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contact Form -->
            <div class="col-lg-8">
                <div class="asap-contact-form" data-aos="fade-left" data-aos-duration="800"
                    style="background:#fff;border:1px solid #eee;border-radius:20px;padding:40px;">
                    <h4 style="font-weight:800;margin-bottom:8px;">Send Us a Message</h4>
                    <p style="color:#777;margin-bottom:30px;">Fill out the form below and our team will get back to you
                        within 24 hours.</p>
                    <form id="contactForm">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Full Name <span style="color:#ff6b00;">*</span></label>
                                <input type="text" name="customer_name" class="form-control" placeholder="John Doe"
                                    required style="border-radius:8px;padding:12px;">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Email <span style="color:#ff6b00;">*</span></label>
                                <input type="email" name="email" class="form-control" placeholder="john@example.com"
                                    required style="border-radius:8px;padding:12px;">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Phone Number</label>
                                <input type="tel" name="phone" class="form-control" placeholder="(555) 123-4567"
                                    style="border-radius:8px;padding:12px;">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Interest</label>
                                <select name="interest" class="form-select" style="border-radius:8px;padding:12px;">
                                    <option value="general">General Inquiry</option>
                                    <option value="purchase">Purchase a Vehicle</option>
                                    <option value="rental">Rent a Vehicle</option>
                                    <option value="custom">Custom Build</option>
                                    <option value="financing">Financing Options</option>
                                </select>
                            </div>
                            <div class="col-12">
                                <label class="form-label">Message <span style="color:#ff6b00;">*</span></label>
                                <textarea name="message" class="form-control" rows="5"
                                    placeholder="Tell us about your project or ask any questions..." required
                                    style="border-radius:8px;padding:12px;"></textarea>
                            </div>
                            <div class="col-12">
                                <button type="submit" class="theme-btn1" id="contactSubmit"
                                    style="width:100%;text-align:center;"><span class="text">Send Message </span><span
                                        class="arrow-all"><span class="arrow1"><i
                                                class="bi bi-arrow-right"></i></span><span class="arrow2"><i
                                                class="bi bi-arrow-right"></i></span></span></button>
                            </div>
                        </div>
                    </form>
                    <div id="contactSuccess" style="display:none;" class="text-center py-5">
                        <i class="bi bi-check-circle" style="font-size:3.5rem;color:#198754;"></i>
                        <h4 class="mt-3" style="font-weight:700;">Message Sent!</h4>
                        <p style="color:#777;">Thank you for reaching out. Our team will contact you within 24 hours.
                        </p>
                        <a href="/" class="theme-btn1 mt-3"><span class="text">Back to Home </span><span
                                class="arrow-all"><span class="arrow1"><i class="bi bi-arrow-right"></i></span><span
                                    class="arrow2"><i class="bi bi-arrow-right"></i></span></span></a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Google Map -->
        <div class="row mt-5">
            <div class="col-12">
                <div data-aos="fade-up" data-aos-duration="800"
                    style="border-radius:20px;overflow:hidden;box-shadow:0 4px 24px rgba(0,0,0,0.08);">
                    <iframe
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d443086.45674287385!2d-95.73444689703078!3d29.817178358437916!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8640b8b4488d8501%3A0xca0d02def365053b!2sHouston%2C%20TX%2C%20USA!5e0!3m2!1sen!2s!4v1700000000000!5m2!1sen!2s"
                        width="100%" height="400" style="border:0;" allowfullscreen="" loading="lazy"
                        referrerpolicy="no-referrer-when-downgrade">
                    </iframe>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts_extra %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var form = document.getElementById('contactForm');
        if (form) {
            form.addEventListener('submit', function (e) {
                e.preventDefault();
                var btn = document.getElementById('contactSubmit');
                btn.disabled = true;
                var fd = new FormData(form);
                fetch('/api/leads', { method: 'POST', body: fd })
                    .then(function (r) { return r.json(); })
                    .then(function (data) {
                        if (data.success) {
                            form.style.display = 'none';
                            document.getElementById('contactSuccess').style.display = 'block';
                        } else {
                            btn.disabled = false;
                            alert('Error: ' + (data.detail || 'Please try again.'));
                        }
                    }).catch(function () {
                        btn.disabled = false;
                        alert('An error occurred. Please try again.');
                    });
            });
        }
    });
</script>
{% endblock %}